{% extends 'base.html.twig' %}

{% block title %}Absences
{% endblock %}

{% block body %}
<div class="container-fluid col-10 col-lg-8 mr-auto ml-auto col-sm-6  p-0 bodyindex">

{% if (app.user.roles[0] == 'ROLE_ADMIN') %}
	<div class="row">
		<div class="col-md-12 col-lg-12 p-2 pt-5">
			<div class="card">
				<div class="d-flex">
					<div class="card-body">
						<h6 class="card-title">
							Détail absence
						</h6>
						<p>
							<table class="table table-bordered table-striped">
								<tbody>
									<tr>
										<th>Employé</th>
										<td>
											<b>{{ absence.employe.nom|capitalize ~ ' ' ~ absence.employe.prenom|capitalize }}</b>
										</td>
									</tr>
									<tr>
										<th>Date debut</th>
										<td>{{ absence.dateDebut ? absence.dateDebut|date('d/m/Y') : '' }}</td>
									</tr>
									<tr>
										<th>Date retour</th>
										<td>{{ absence.dateRetour ? absence.dateRetour|date('d/m/Y') : '' }}</td>
									</tr>
									<tr>
										<th>Statut</th>
										<td {{ absence.statut == 'En attente' ? "class='table-warning'" : '' }} 
											{{ absence.statut == 'Validée' ? "class='table-success'" : '' }} 
											{{ absence.statut == 'Rejetée' ? "class='table-danger'" : '' }}>
											{{ absence.statut }}
										</td>
									</tr>
								</tbody>
							</table>
							<div class="d-flex justify-content-end">
								<div class='d-inline-flex'>
									{{ include('absences/_delete_form.html.twig') }}

									<a class='d-block btn rounded-pill btn-primary ml-1' href="{{ path('absences_index') }}">Retour à la liste</a>

									<a class='btn btn-success rounded-pill ml-1' href="{{ path('absences_validation', {'id': absence.id}) }}">Valider</a>

								</div>
							</div>
						</p>
					</div>
				</div>
			</div>
		</div>
	</div>
{% endif %}

{% if (app.user.roles[0] == 'ROLE_RH') %}
<div class="row">
	<div class="col-md-12 col-lg-12 p-2 pt-5">
		<div class="card">
			<div class="d-flex">
				<div class="card-body">
					<h6 class="card-title">
						Détail absence
					</h6>
					<p>
						<table class="table table-bordered table-striped">
							<tbody>
								<tr>
									<th>Employé</th>
									<td>
										<b>{{ absence.employe.nom|capitalize ~ ' ' ~ absence.employe.prenom|capitalize }}</b>
									</td>
								</tr>
								<tr>
									<th>Date debut</th>
									<td>{{ absence.dateDebut ? absence.dateDebut|date('d/m/Y') : '' }}</td>
								</tr>
								<tr>
									<th>Date retour</th>
									<td>{{ absence.dateRetour ? absence.dateRetour|date('d/m/Y') : '' }}</td>
								</tr>
								<tr>
									<th>Statut</th>
									<td {{ absence.statut == 'En attente' ? "class='table-warning'" : '' }} {{ absence.statut == 'Validée' ? "class='table-success'" : '' }} {{ absence.statut == 'Rejetée' ? "class='table-danger'" : '' }}>
										{{ absence.statut }}
									</td>
								</tr>
							</tbody>
						</table>
						<div class="d-flex justify-content-end">
							<div class='d-inline-flex'>
								{{ include('absences/_delete_form.html.twig') }}

								<a class='d-block btn rounded-pill btn-primary ml-1' href="{{ path('absences_index') }}">Retour à la liste</a>

								<a class='btn btn-success rounded-pill ml-1' href="{{ path('absences_validation', {'id': absence.id}) }}">Valider</a>

							</div>
						</div>
					</p>
				</div>
			</div>
		</div>
	</div>
</div>


{% endif %}

{% if (app.user.roles[0] == 'ROLE_MANAGER') %}
<div class="row">
	<div class="col-md-12 col-lg-12 p-2 pt-5">
		<div class="card">
			<div class="d-flex">
				<div class="card-body">
					<h6 class="card-title">
						Détail absence
					</h6>
					<p>
						<table class="table table-bordered table-striped">
							<tbody>
								<tr>
									<th>Employé</th>
									<td>
										<b>{{ absence.employe.nom|capitalize ~ ' ' ~ absence.employe.prenom|capitalize }}</b>
									</td>
								</tr>
								<tr>
									<th>Date debut</th>
									<td>{{ absence.dateDebut ? absence.dateDebut|date('d/m/Y') : '' }}</td>
								</tr>
								<tr>
									<th>Date retour</th>
									<td>{{ absence.dateRetour ? absence.dateRetour|date('d/m/Y') : '' }}</td>
								</tr>
								<tr>
									<th>Statut</th>
									<td {{ absence.statut == 'En attente' ? "class='table-warning'" : '' }} {{ absence.statut == 'Validée' ? "class='table-success'" : '' }} {{ absence.statut == 'Rejetée' ? "class='table-danger'" : '' }}>
										{{ absence.statut }}
									</td>
								</tr>
							</tbody>
						</table>
						<div class="d-flex justify-content-end">
							<div class='d-inline-flex'>
								{{ include('absences/_delete_form.html.twig') }}

								<a class='d-block btn rounded-pill btn-primary ml-1' href="{{ path('absences_index') }}">Retour à la liste</a>

								<a class='btn btn-success rounded-pill ml-1' href="{{ path('absences_validation', {'id': absence.id}) }}">Valider</a>

							</div>
						</div>
					</p>
				</div>
			</div>
		</div>
	</div>
</div>


{% endif %}

{% if (app.user.roles[0] == 'ROLE_EMPLOYE') %}
	<div class="row">
		<div class="col-md-12 col-lg-12 p-2 pt-5">
			<div class="card">
				<div class="d-flex">
					<div class="card-body">
						<h6 class="card-title">
							Détail absence
						</h6>
						<p>
							<table class="table table-bordered table-striped">
								<tbody>
									<tr>
										<th>Employé</th>
										<td>
											<b>{{ absence.employe.nom|capitalize ~ ' ' ~ absence.employe.prenom|capitalize }}</b>
										</td>
									</tr>
									<tr>
										<th>Date debut</th>
										<td>{{ absence.dateDebut ? absence.dateDebut|date('d/m/Y') : '' }}</td>
									</tr>
									<tr>
										<th>Date retour</th>
										<td>{{ absence.dateRetour ? absence.dateRetour|date('d/m/Y') : '' }}</td>
									</tr>
									<tr>
										<th>Statut</th>
										<td {{ absence.statut == 'En attente' ? "class='table-warning'" : '' }} {{ absence.statut == 'Validée' ? "class='table-success'" : '' }} {{ absence.statut == 'Rejetée' ? "class='table-danger'" : '' }}>
											{{ absence.statut }}
										</td>
									</tr>
								</tbody>
							</table>
							<div class="d-flex justify-content-end">
								<div class='d-inline-flex'>
									{{ include('absences/_delete_form.html.twig') }}

									<a class='d-block btn rounded-pill btn-primary ml-1' href="{{ path('absences_index') }}">Retour à la liste</a>

								</div>
							</div>
						</p>
					</div>
				</div>
			</div>
		</div>
	</div>

{% endif %}

{% endblock %}
